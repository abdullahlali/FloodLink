/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.5
 */
import{m as s}from"./p-de1e6aff.js";import{a as t}from"./p-b3365ff9.js";import{p as i,A as e,a as h,w as o}from"./p-13190538.js";import{d as a}from"./p-68ed9743.js";const r=s(t),n=s=>(t,i)=>c(t,s,i),c=i(class extends e{hostConnected(){this.component.manager.loadedCalled&&a(this.component)}async hostLoad(){await super.hostLoad(),this.component.manager.destroyed||(this._watchMetaProperties(),h.reEmitAccessorEvents(this,this._instance,this.reactiveUtils,"viewModel"))}hostLoaded(){const{el:s}=this.component;s.childElem=s.shadowRoot?.firstElementChild??s.firstElementChild??void 0??s.childElem;let t=!1;const i=this.component.el.view;Object.defineProperty(this.component.el,"view",{get:()=>this._instance.view,set:s=>{const i=this.component.el.view,e=s;this._instance.view=e,this._instance.map=e?.map,this._watchViewDestroy(),this.component.requestUpdate("view",i),s&&!t&&(t=!0,this.component.arcgisReady.emit())},configurable:!0,enumerable:!0}),i&&(this._instance.view=i),this.component.el.isConnected&&(a(this.component),this._watchViewDestroy())}hostDisconnected(){"object"==typeof this.component.el.childElem&&this.component.el.view?.ui?.remove(this.component.el.childElem)}hostDestroy(){super.hostDestroy(),this._watchViewDestroyHandle?.remove()}_watchMetaProperties(){o(this.component,"position",(s=>{null!=this.component.el.childElem&&"string"==typeof s&&a(this.component)})),o(this.component,"referenceElement",(()=>a(this.component)))}_watchViewDestroy(){this._watchViewDestroyHandle?.remove(),this._watchViewDestroyHandle=this.reactiveUtils.when((()=>!0===this.component.el.view?.destroyed),(()=>{this.component.destroy().catch(console.error)}),{sync:!0})}});export{n as m,r as u}